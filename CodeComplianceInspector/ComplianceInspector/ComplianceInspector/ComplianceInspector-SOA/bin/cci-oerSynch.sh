#!/bin/sh
old_path=`pwd`
cd `dirname $0`
cd ..
AUDIT_HOME=`pwd`
cd $old_path
export AUDIT_HOME
echo AUDIT_HOME: $AUDIT_HOME
if [ "$JAVA_HOME" = "" ] 
then
   echo -----------------------------------------------------------------------
   echo JAVA_HOME environment variable required to be set before execution  
   echo Usage:  
   echo        export JAVA_HOME before runnning.
   echo Example:
   echo        export JAVA_HOME=/home/JAVA1.5_10
   echo -----------------------------------------------------------------------
exit 1
fi
CLASSPATH=$AUDIT_HOME/lib/compliance.policy.engine.jar:$AUDIT_HOME/config:$AUDIT_HOME/lib:$AUDIT_HOME/lib/axis.jar:$AUDIT_HOME/lib/client.rex-11.1.1.6.0.jar:$AUDIT_HOME/lib/commons-discovery-0.2.jar:$AUDIT_HOME/lib/commons-logging-1.0.4.jar:$AUDIT_HOME/lib/jaxrpc.jar:$AUDIT_HOME/lib/wsdl4j-1.5.1.jar:$AUDIT_HOME/lib/mail.jar:$AUDIT_HOME/lib/activation.jar:$CLASSPATH
PATH=$AUDIT_HOME/bin:$PATH
if [ "$1" = "-help" ]
then 
   echo -----------------------------------------------------------------------
   echo Syntax for invoking OER Synch is :
   echo -------------------------------------------
   echo Usage:  
   echo ./cci-oerSynch.sh -url {oer_service_url} -user {oer_user_name} -pwd {oer_pwd} -reportLocation {report_location}
   echo --------------------
   echo Parameters :
   echo --------------------
   echo   -url        		[OPTIONAL] Url to oer web_service server. If not specified value will come from property file.
   echo   -user       		[OPTIONAL] user name for connecting to oer. If not specified value will come from property file.
   echo   -pwd       		[OPTIONAL] password for connecting to oer. If not specified you will be prompt on runtime.
   echo   -reportLocation   [REQUIRED] location of outpur directory generated by Code Compliance Inspector.
   echo --------------------            
   echo Example:
   echo --------------------
   echo ./cci-oerSynch.sh http://example.domain.com:port/oer/services -user admin -reportLocation /scratch/gaurjain/Reports/SOA/SyncProductBRMCommsReqABCSImpl
   echo -----------------------------------------------------------------------
exit 1
fi
echo "------------------------------------------------------------------------"
echo OERCCISYNCH CP : $CLASSPATH
echo "------------------------------------------------------------------------"
export CLASSPATH
$JAVA_HOME/bin/java -Xms256m -Xmx1024m oracle.soa.aia.governance.auditor.external.oer11g.ResultSynchService "$@"
